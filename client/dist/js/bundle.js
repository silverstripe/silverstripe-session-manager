!function(){"use strict";var e={38:function(e,t,n){var a,s=(a=n(121))&&a.__esModule?a:{default:a};window.document.addEventListener("DOMContentLoaded",(()=>{(0,s.default)()}))},121:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n(345)),s=u(n(78)),o=u(n(889)),r=u(n(207));function u(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{r.default.component.registerMany({LoginSession:a.default,LoginSessionContainer:s.default,SessionManagerField:o.default})}},345:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(815)),s=l(n(935)),o=l(n(594)),r=l(n(123)),u=l(n(551));function l(e){return e&&e.__esModule?e:{default:e}}const i="L LT";function d(e){const t=a.default._t("SessionManager.CURRENT","Current"),n=e.submitting||e.complete&&!e.failed?a.default._t("SessionManager.LOGGING_OUT","Logging out..."):a.default._t("SessionManager.LOG_OUT","Log out");return o.default.createElement("div",{className:"login-session "+(e.complete&&!e.failed?"hidden":"")},o.default.createElement("p",null,e.UserAgent),o.default.createElement("p",{className:"text-muted"},e.IPAddress,function(){r.default.locale(a.default.detectLocale());const t=r.default.utc(e.Created).local(),n=r.default.utc(e.LastAccessed).local(),s=t.fromNow(),u=n.fromNow(),l=a.default.inject(a.default._t("Admin.ACTIVITY_TOOLTIP_TEXT","Signed in {signedIn}, Last active {lastActive}"),{signedIn:t.format(i),lastActive:n.format(i)}),d=e.IsCurrent?a.default.inject(a.default._t("SessionManager.AUTHENTICATED","authenticated {createdElapsed}..."),{createdElapsed:s}):a.default.inject(a.default._t("SessionManager.LAST_ACTIVE","last active {lastAccessedElapsed}..."),{lastAccessedElapsed:u});return o.default.createElement("span",{"data-toggle":"tooltip","data-placement":"top",title:l},", ",d)}()),o.default.createElement("p",null,e.IsCurrent&&o.default.createElement("strong",{className:"text-success"},t),!e.IsCurrent&&o.default.createElement(u.default,{color:"link",className:"login-session__logout",onClick:()=>{e.submitting||e.complete||e.logout()}},n)))}d.propTypes={IPAddress:s.default.string.isRequired,IsCurrent:s.default.bool,UserAgent:s.default.string,Created:s.default.string.isRequired,LastAccessed:s.default.string.isRequired,submitting:s.default.bool.isRequired,complete:s.default.bool.isRequired,failed:s.default.bool.isRequired};t.default=d},78:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Component=p,t.default=void 0;var a=f(n(935)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var r=s?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(a,o,r):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(594)),o=n(40),r=f(n(609)),u=f(n(177)),l=n(918),i=f(n(815)),d=f(n(345));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e){const[t,n]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1);const{ID:f,...p}=e,g={logout:function(){var t;return c(!0),(t=e.LogOutEndpoint,r.default.createEndpointFetcher({url:`${t}/:id`.replace("//","/"),method:"delete",payloadSchema:{id:{urlReplacement:":id",remove:!0},SecurityID:{querystring:!0}}}))({id:e.ID,SecurityID:u.default.get("SecurityID")}).then((t=>{e.displayToastSuccess(t.message)})).catch((t=>(o(!0),t.response.text().then((t=>{const n=JSON.parse(t);return"object"!=typeof n||"string"!=typeof n.message?Promise.reject("No readable error message"):(e.displayToastFailure(n.message),Promise.resolve())}))))).catch((()=>{e.displayToastFailure(i.default._t("SessionManager.COULD_NOT_LOGOUT","Could not log out of session. Try again later."))})).finally((()=>{n(!0),c(!1)}))},complete:t,failed:a,submitting:l,...p};return s.default.createElement(d.default,g)}p.propTypes={ID:a.default.number.isRequired,LogOutEndpoint:a.default.string.isRequired,displayToastSuccess:a.default.func.isRequired,displayToastFailure:a.default.func.isRequired,IPAddress:a.default.string.isRequired,IsCurrent:a.default.bool,UserAgent:a.default.string,Created:a.default.string.isRequired,LastAccessed:a.default.string.isRequired};t.default=(0,o.connect)((()=>({})),(function(e){return{displayToastSuccess(t){e((0,l.success)(t))},displayToastFailure(t){e((0,l.error)(t))}}}))(p)},889:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(594)),s=r(n(935)),o=r(n(78));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return a.default.createElement("ul",{className:"session-manager-field list-unstyled"},e.loginSessions.map((e=>a.default.createElement("li",{key:e.ID,className:"list-unstyled"},a.default.createElement(o.default,e)))))}u.propTypes={loginSessions:s.default.arrayOf(o.default.propTypes)};t.default=u},602:function(e,t,n){var a=u(n(594)),s=n(145),o=n(207),r=u(n(669));function u(e){return e&&e.__esModule?e:{default:e}}r.default.entwine("ss",(e=>{e('.js-injector-boot [data-field-type="session-manager-field"]').entwine({onmatch(){!function(e){const t=(0,o.loadComponent)("SessionManagerField"),{schema:{loginSessions:n}}=e.data("schema");(0,s.createRoot)(e[0]).render(a.default.createElement(t,{loginSessions:n}))}(this)}})}))},965:function(e,t,n){n(602)},609:function(e){e.exports=Backend},551:function(e){e.exports=Button},177:function(e){e.exports=Config},207:function(e){e.exports=Injector},935:function(e){e.exports=PropTypes},594:function(e){e.exports=React},145:function(e){e.exports=ReactDomClient},40:function(e){e.exports=ReactRedux},918:function(e){e.exports=ToastsActions},815:function(e){e.exports=i18n},669:function(e){e.exports=jQuery},123:function(e){e.exports=moment}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n(965),n(38)}();