!function(){"use strict";var e={274:function(e,t,n){var a,o=(a=n(521))&&a.__esModule?a:{default:a};window.document.addEventListener("DOMContentLoaded",(()=>{(0,o.default)()}))},521:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n(239)),o=u(n(601)),s=u(n(592)),r=u(n(648));function u(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{r.default.component.registerMany({LoginSession:a.default,LoginSessionContainer:o.default,SessionManagerField:s.default})}},239:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(754)),o=i(n(86)),s=i(n(363)),r=i(n(488)),u=i(n(17));function i(e){return e&&e.__esModule?e:{default:e}}const l="L LT";function d(e){const t=a.default._t("SessionManager.CURRENT","Current"),n=e.submitting||e.complete&&!e.failed?a.default._t("SessionManager.LOGGING_OUT","Logging out..."):a.default._t("SessionManager.LOG_OUT","Log out");return s.default.createElement("div",{className:"login-session "+(e.complete&&!e.failed?"hidden":"")},s.default.createElement("p",null,e.UserAgent),s.default.createElement("p",{className:"text-muted"},e.IPAddress,function(){r.default.locale(a.default.detectLocale());const t=r.default.utc(e.Created).local(),n=r.default.utc(e.LastAccessed).local(),o=t.fromNow(),u=n.fromNow(),i=a.default.inject(a.default._t("Admin.ACTIVITY_TOOLTIP_TEXT","Signed in {signedIn}, Last active {lastActive}"),{signedIn:t.format(l),lastActive:n.format(l)}),d=e.IsCurrent?a.default.inject(a.default._t("SessionManager.AUTHENTICATED","authenticated {createdElapsed}..."),{createdElapsed:o}):a.default.inject(a.default._t("SessionManager.LAST_ACTIVE","last active {lastAccessedElapsed}..."),{lastAccessedElapsed:u});return s.default.createElement("span",{"data-toggle":"tooltip","data-placement":"top",title:i},", ",d)}()),s.default.createElement("p",null,e.IsCurrent&&s.default.createElement("strong",{className:"text-success"},t),!e.IsCurrent&&s.default.createElement(u.default,{color:"link",className:"login-session__logout",onClick:()=>{e.submitting||e.complete||e.logout()}},n)))}d.propTypes={IPAddress:o.default.string.isRequired,IsCurrent:o.default.bool,UserAgent:o.default.string,Created:o.default.string.isRequired,LastAccessed:o.default.string.isRequired,submitting:o.default.bool.isRequired,complete:o.default.bool.isRequired,failed:o.default.bool.isRequired};var c=d;t.default=c},601:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Component=p,t.default=void 0;var a=f(n(86)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}a.default=e,n&&n.set(e,a);return a}(n(363)),s=n(624),r=f(n(159)),u=f(n(510)),i=f(n(239)),l=n(123),d=f(n(754));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(e){const[t,n]=(0,o.useState)(!1),[a,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1);const{ID:f,...p}=e,g={logout:function(){var t;return c(!0),(t=e.LogOutEndpoint,r.default.createEndpointFetcher({url:`${t}/:id`.replace("//","/"),method:"delete",payloadSchema:{id:{urlReplacement:":id",remove:!0},SecurityID:{querystring:!0}}}))({id:e.ID,SecurityID:u.default.get("SecurityID")}).then((t=>{e.displayToastSuccess(t.message)})).catch((t=>(s(!0),t.response.text().then((t=>{const n=JSON.parse(t);return"object"!=typeof n||"string"!=typeof n.message?Promise.reject("No readable error message"):(e.displayToastFailure(n.message),Promise.resolve())}))))).catch((()=>{e.displayToastFailure(d.default._t("SessionManager.COULD_NOT_LOGOUT","Could not log out of session. Try again later."))})).finally((()=>{n(!0),c(!1)}))},complete:t,failed:a,submitting:l,...p};return o.default.createElement(i.default,g)}p.propTypes={ID:a.default.number.isRequired,LogOutEndpoint:a.default.string.isRequired,displayToastSuccess:a.default.func.isRequired,displayToastFailure:a.default.func.isRequired,IPAddress:a.default.string.isRequired,IsCurrent:a.default.bool,UserAgent:a.default.string,Created:a.default.string.isRequired,LastAccessed:a.default.string.isRequired};var g=(0,s.connect)((()=>({})),(function(e){return{displayToastSuccess(t){e((0,l.success)(t))},displayToastFailure(t){e((0,l.error)(t))}}}))(p);t.default=g},592:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(363)),o=r(n(601)),s=r(n(86));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return a.default.createElement("ul",{className:"session-manager-field list-unstyled"},e.loginSessions.map((e=>a.default.createElement("li",{key:e.ID,className:"list-unstyled"},a.default.createElement(o.default,e)))))}u.propTypes={loginSessions:s.default.arrayOf(o.default.propTypes)};var i=u;t.default=i},224:function(e,t,n){var a=u(n(363)),o=n(745),s=n(648),r=u(n(311));function u(e){return e&&e.__esModule?e:{default:e}}r.default.entwine("ss",(e=>{e('.js-injector-boot [data-field-type="session-manager-field"]').entwine({onmatch(){!function(e){const t=(0,s.loadComponent)("SessionManagerField"),{schema:{loginSessions:n}}=e.data("schema");(0,o.createRoot)(e[0]).render(a.default.createElement(t,{loginSessions:n}))}(this)}})}))},924:function(e,t,n){n(224)},745:function(e,t,n){var a=n(394);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},159:function(e){e.exports=Backend},17:function(e){e.exports=Button},510:function(e){e.exports=Config},648:function(e){e.exports=Injector},86:function(e){e.exports=PropTypes},363:function(e){e.exports=React},394:function(e){e.exports=ReactDom},624:function(e){e.exports=ReactRedux},123:function(e){e.exports=ToastsActions},754:function(e){e.exports=i18n},311:function(e){e.exports=jQuery},488:function(e){e.exports=moment}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n(924),n(274)}();